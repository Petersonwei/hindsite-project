<h1>Posts</h1>

<% if logged_in? %>
  <div>
    <%= link_to "New Post", new_post_path %>
  </div>
<% end %>

<div>
  <% @posts.each do |post| %>
    <div>
      <h3>Post by <%= post.user.name %> from <%= post.user.organisation.name %></h3>
      <p><%= post.description %></p>
      <p><%= link_to "View", post_path(post) %></p>
      <% if current_user && current_user == post.user %>
        <p>
          <%= link_to "Edit", edit_post_path(post) %> |
          <%= link_to "Delete", post_path(post), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
        </p>
      <% end %>
    </div>
    <hr>
  <% end %>
</div>

<% unless logged_in? %>
  <div>
    <p>
      <%= link_to "Login", login_path %> or 
      <%= link_to "Sign Up", new_user_path %> to create posts
    </p>
  </div>
<% end %>
