<div class="profile-container">
  <div class="profile-header">
    <h1><%= @user.name %>'s Profile</h1>
    <% if current_user && current_user == @user %>
      <div class="profile-actions">
        <%= link_to "Edit Profile", edit_user_path(@user), class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>

  <div class="profile-card">
    <div class="profile-section">
      <h3>Personal Information</h3>
      <div class="profile-details">
        <div class="detail-row">
          <div class="detail-label">Name:</div>
          <div class="detail-value"><%= @user.name %></div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Email:</div>
          <div class="detail-value"><%= @user.email %></div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Organisation:</div>
          <div class="detail-value">
            <% if @user.organisation %>
              <%= @user.organisation.name %>
            <% else %>
              <span class="no-org">Not a member of any organisation</span>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <% if @user.posts.any? %>
    <div class="user-posts">
      <h3><%= @user.name %>'s Posts</h3>
      <div class="posts-list">
        <% @user.posts.order(created_at: :desc).each do |post| %>
          <div class="post-card">
            <div class="post-content">
              <h4>Post #<%= post.id %></h4>
              <p class="post-body"><%= post.description %></p>
              <p class="post-date">Posted on <%= post.created_at.strftime("%B %d, %Y") %></p>
            </div>
            <% if current_user && current_user == @user %>
              <div class="post-actions">
                <%= link_to "Edit", edit_post_path(post), class: "post-button" %>
                <%= link_to "Delete", post, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "post-button delete" %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="no-posts">
      <p>No posts yet.</p>
      <% if current_user && current_user == @user %>
        <%= link_to "Create a New Post", new_post_path, class: "btn btn-primary" %>
      <% end %>
    </div>
  <% end %>

  <div class="back-link">
    <%= link_to "Back to Users", users_path %>
  </div>
</div>

<style>
  .profile-container {
    max-width: 800px;
    margin: 40px auto;
    padding: 20px;
  }

  .profile-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
  }

  .profile-card {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    margin-bottom: 30px;
  }

  .profile-section h3 {
    color: #333;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
    margin-bottom: 20px;
  }

  .profile-details {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .detail-row {
    display: flex;
    flex-direction: row;
  }

  .detail-label {
    font-weight: bold;
    width: 120px;
  }

  .no-org {
    color: #856404;
    font-style: italic;
  }

  .user-posts {
    margin-top: 40px;
  }

  .user-posts h3 {
    margin-bottom: 20px;
  }

  .posts-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .post-card {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .post-content h4 {
    margin-top: 0;
    color: #333;
  }

  .post-body {
    margin-bottom: 15px;
  }

  .post-date {
    color: #666;
    font-size: 14px;
  }

  .post-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 15px;
  }

  .post-button {
    padding: 5px 10px;
    border-radius: 4px;
    text-decoration: none;
    background-color: #f8f9fa;
    color: #333;
  }

  .post-button:hover {
    background-color: #e9ecef;
  }

  .post-button.delete {
    color: #dc3545;
  }

  .no-posts {
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 30px;
    text-align: center;
    margin-top: 20px;
  }

  .btn {
    padding: 8px 16px;
    border-radius: 4px;
    text-decoration: none;
    font-size: 14px;
    border: none;
    cursor: pointer;
  }

  .btn-primary {
    background-color: #5D5FEF;
    color: white;
  }

  .btn-primary:hover {
    background-color: #4B4DCF;
  }

  .back-link {
    margin-top: 30px;
  }

  .back-link a {
    color: #5D5FEF;
    text-decoration: none;
  }

  .back-link a:hover {
    text-decoration: underline;
  }
</style>
